<!-- Slick workaround for TurboLinks -->
<% content_for :head do %>
  <meta name="turbolinks-cache-control" content="no-cache">
<% end %>

<div id="products" class="row">
  <div class="container">
    <div class="product-title-container col s12 m12 l12">
      <h1>Products</h1>
    </div>
  </div>
  <div class="col s12" id="all-products">
    <% @products.each do |prod| %>
      <% @prod_streaming = prod.product_type === "Streaming Audio" %>
      <% if @prod_streaming.present? %>
        <div id="streaming-audio" class="col s12">
          <div class="container">
            <h3>Streaming Audio</h3>
          </div>
          <div class="col s12 slick-slider">
            <div class="multiple-items">
              <div><%= link_to image_tag(prod.small_img.url()), prod %></div>
            </div>
          </div>
        </div>
      <% end %>
      <% @prod_amps = prod.product_type === "Amplifiers" %>
      <% if @prod_amps.present? %>
        <div id="streaming-audio" class="col s12">
          <div class="container">
            <h3>Amplifiers</h3>
          </div>
          <div class="col s12 slick-slider">
            <div class="multiple-items">
              <div><%= link_to image_tag(prod.small_img.url()), prod %></div>
            </div>
          </div>
        </div>
      <% end %>
    <% end %>
    <script>
      $('.multiple-items').slick({
        infinite: true,
        slidesToShow: 3,
        slidesToScroll: 3
      });
    </script>
  </div>
</div>